<div class="container mt-4">

  <!-- Título -->
  <h3 class="mb-4 text-center">Gráfico de Aprobación por Asignación</h3>

  <!-- SELECT DE ASIGNACIONES -->
  <div class="mb-4">
    <label class="form-label fw-bold">Selecciona una asignación:</label>
    <select class="form-select"
            [(ngModel)]="idAsignacionSeleccionada"
            (change)="cargarGrafico()">
      <option *ngFor="let op of opcionesInscripcion" 
              [value]="op.id">
        {{ op.value }}
      </option>
    </select>
  </div>

  <!-- LOADING -->
 <ng-container *ngIf="cargando; else mostrarDatos">
  <app-loading></app-loading>
</ng-container>

<ng-template #mostrarDatos>
  <div class="chart-wrapper" *ngIf="resumen">
    <div class="pie-3d"
         [style.background]="
           'conic-gradient(#046c30 ' + porcentajeAprobados + '%, ' +
                            '#7d1d12 ' + porcentajeAprobados + '%)'
         ">
      <div class="pie-label">
        {{ porcentajeAprobados | number:'1.0-0' }}%
        <span>Aprobados</span>
      </div>
    </div>
  </div>

  <div class="numbers" *ngIf="resumen">
    <p><strong>Total:</strong> {{ resumen.totalAlumnos }}</p>
    <p class="ok"><strong>Aprobados:</strong> {{ resumen.alumnosAprobados }}</p>
    <p class="fail"><strong>Reprobados:</strong> {{ resumen.alumnosReprobados }}</p>
  </div>
</ng-template>
