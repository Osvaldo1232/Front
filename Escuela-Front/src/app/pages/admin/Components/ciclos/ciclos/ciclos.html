<div class="container">
  <header class="header">
    <h1 class="header__title">CICLOS ESCOLARES</h1>
  </header>

  <!-- Botón Nuevo -->
  <div class="button-section">
    <button class="btn btn--new" (click)="nuevo()">+ Nuevo</button>
  </div>

  <!-- Mensaje cuando no hay ciclos -->
  <div *ngIf="registros.length === 0" class="no-data">
    <p>No hay ciclos escolares registrados.</p>
  </div>

  <!-- Grid de tarjetas -->
  <div class="cards-grid" *ngIf="registros.length > 0">
    <div class="card" *ngFor="let ciclo of ciclosPaginados">
      <!-- ✅ EXTRAER SOLO EL AÑO -->
      <h2 class="card__title">{{ extraerAnio(ciclo.fechaInicio) }}-{{ extraerAnio(ciclo.fechaFin) }}</h2>
      
      <div class="card__footer">
        <div class="card__status">
          <span class="status-label">Estatus: Inactivo</span>
          <label class="toggle">
            <input 
              type="checkbox" 
              [checked]="ciclo.estatus === 'ACTIVO'"
              (change)="cambiarEstatus(ciclo)">
            <span class="toggle__slider"></span>
          </label>
          <span class="status-label">Activo</span>
        </div>
        <button class="btn btn--edit" (click)="editar(ciclo)">EDITAR</button>
      </div>
    </div>
  </div>

  <!-- Paginación -->
  <div class="pagination" *ngIf="totalPaginas > 1">
    <button class="pagination__btn pagination__btn--prev" (click)="cambiarPagina(paginaActual - 1)" [disabled]="paginaActual === 1">‹</button>
    <button
      *ngFor="let p of totalPaginasArray"
      class="pagination__btn"
      [class.pagination__btn--active]="p === paginaActual"
      (click)="cambiarPagina(p)"
    >
      {{ p }}
    </button>
    <button class="pagination__btn pagination__btn--next" (click)="cambiarPagina(paginaActual + 1)" [disabled]="paginaActual === totalPaginas">›</button>
  </div>
</div>

<!-- Modal Nuevo Ciclo -->
<app-nuevo-ciclo 
  *ngIf="nuevom" 
  [nuevo]="nuevom" 
  (cerrar)="cerrarModal($event)">
</app-nuevo-ciclo>

<!-- Modal Editar Ciclo -->
<app-editar-ciclo 
  *ngIf="editarm"
  [editar]="editarm"
  [ciclo]="cicloSeleccionado"
  (cerrar)="cerrarModalEditar($event)">
</app-editar-ciclo>

<app-loading></app-loading>