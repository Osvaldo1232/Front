<div class="historial-alumno-container">
  <h1 class="titulo-principal">Historial Academico por Alumno</h1>

  <div class="filtros-container">
    <div class="filtro-group">
      <label for="cicloEscolar">Ciclo Escolar <span class="requerido">*</span></label>
      <select 
        id="cicloEscolar" 
        class="form-control" 
        [(ngModel)]="filtros.cicloEscolar"
        (change)="buscarHistorial()">
        <option value="">Seleccione...</option>
        <option *ngFor="let ciclo of ciclosDisponibles" [value]="ciclo">{{ ciclo }}</option>
      </select>
    </div>

    <div class="filtro-group">
      <label for="alumno">Alumno <span class="requerido">*</span></label>
      <input 
        type="text" 
        id="alumno" 
        class="form-control" 
        [(ngModel)]="filtros.alumno"
        placeholder="Buscar alumno...">
    </div>

    <div class="botones-accion">
      <button class="btn btn-buscar" (click)="buscarHistorial()" [disabled]="!puedesBuscar()">
        Buscar
      </button>
      <button class="btn btn-limpiar" (click)="limpiarFiltros()">
        Limpiar
      </button>
    </div>
  </div>

  <div class="spinner-container" *ngIf="cargando">
    <div class="spinner"></div>
    <p>Cargando historial...</p>
  </div>

  <div class="tabla-container" *ngIf="!cargando && calificaciones.length > 0">
    <table class="tabla-historial">
      <thead>
        <tr>
          <th>CAMPO FORMATIVO</th>
          <th>GRADO</th>
          <th>GRUPO</th>
          <th>CALIFICACION<br/>/ TRIMESTRE 1</th>
          <th>CALIFICACION /<br/>TRIMESTRE 2</th>
          <th>CALIFICACION<br/>/ TRIMESTRE 3</th>
          <th>CALIFICACION<br/>FINAL</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let registro of calificaciones; let i = index" 
            [class.fila-par]="i % 2 === 0"
            [class.fila-impar]="i % 2 !== 0">
          <td>{{ registro.campoFormativo }}</td>
          <td>{{ registro.grado }}</td>
          <td>{{ registro.grupo }}</td>
          <td>{{ registro.trimestre1 }}</td>
          <td>{{ registro.trimestre2 }}</td>
          <td>{{ registro.trimestre3 }}</td>
          <td>{{ registro.calificacionFinal }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="sin-datos" *ngIf="!cargando && calificaciones.length === 0 && busquedaRealizada">
    <p>No se encontraron calificaciones para el alumno seleccionado</p>
  </div>

  <div class="mensaje-inicial" *ngIf="!cargando && !busquedaRealizada">
    <p>Seleccione un ciclo escolar y un alumno para ver su historial acad√©mico</p>
  </div>
</div>