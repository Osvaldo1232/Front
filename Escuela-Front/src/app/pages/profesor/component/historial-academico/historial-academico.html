<div class="historial-container">
  <h1 class="titulo-principal">Historial Academico</h1>

  <div class="filtros-container">
    <div class="filtro-group">
      <label for="cicloEscolar">Ciclo Escolar</label>
      <select 
        id="cicloEscolar" 
        class="form-control" 
        [(ngModel)]="filtros.cicloEscolar"
        (change)="aplicarFiltros()">
        <option value="">Todos</option>
        <option *ngFor="let ciclo of ciclosDisponibles" [value]="ciclo">{{ ciclo }}</option>
      </select>
    </div>
    
    <div class="filtro-group">
      <label for="alumno">Alumno</label>
      <input 
        type="text" 
        id="alumno" 
        class="form-control" 
        [(ngModel)]="filtros.alumno"
        (input)="aplicarFiltros()"
        placeholder="Buscar alumno...">
    </div>

    <div class="botones-accion">
      <button class="btn btn-buscar" (click)="aplicarFiltros()">Buscar</button>
      <button class="btn btn-limpiar" (click)="limpiarFiltros()">Limpiar</button>
    </div>
  </div>

  <div class="spinner-container" *ngIf="cargando">
    <div class="spinner"></div>
    <p>Cargando historial...</p>
  </div>

  <div class="tabla-responsive" *ngIf="!cargando">
    <table class="table table-striped table-hover grid-table align-middle">
      <thead class="grid-header text-whit">
        <tr>
          <th>ALUMNO</th>
          <th>CICLO ESCOLAR</th>
          <th>GRADO</th>
          <th>GRUPO</th>
          <th>CALIFICACION</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let registro of registrosFiltrados; let i = index" 
            [class.fila-par]="i % 2 === 0"
            [class.fila-impar]="i % 2 !== 0">
          <td>{{ registro.alumno }}</td>
          <td>{{ registro.cicloEscolar }}</td>
          <td>{{ registro.grado }}</td>
          <td>{{ registro.grupo }}</td>
          <td>{{ registro.calificacion }}</td>
        </tr>
      </tbody>
    </table>

    <div class="sin-datos" *ngIf="registrosFiltrados.length === 0">
      <p>No se encontraron registros</p>
    </div>
  </div>
</div>