<div class="container-fluid py-4">
  <!-- ===== TÍTULO ===== -->
  <div class="row">
    <div class="col-12">
      <h2 class="text-uppercase mb-1 titulo-h2">HISTORIAL ACADÉMICO</h2>
      <h5 class="text-muted mb-4 titulo-h5">
        Historial académico del alumno
      </h5>
    </div>
  </div>
<div class="text-end mb-3">
  <button class="btn btn-sm btn-outline-primary d-inline-flex align-items-center gap-1"
          (click)="descargarPDF()">

    <!-- Ícono SVG de descarga -->
    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" 
         fill="currentColor" viewBox="0 0 16 16">
      <path d="M.5 9.9v3.6c0 .8.7 1.5 1.5 1.5h12c.8 0 1.5-.7 1.5-1.5V9.9"/>
      <path d="M7.5 1v8.8l-3-3m3 3l3-3"/>
    </svg>

    Descargar
  </button>
</div>


  <!-- ===== LISTA DE CALIFICACIONES POR GRADO ===== -->
  <div *ngIf="calificaciones.calificacionesPorGrado.length; else sinDatos">
    <div
      *ngFor="let grado of calificaciones.calificacionesPorGrado"
      class="card mb-4 shadow-lg border-0"
    >
      <div class="card-header text-black">
        <h5 class="mb-0 text-uppercase">
          {{ grado.grado }}
        </h5>
      </div>
      <!-- TABLA DE MATERIAS -->
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-striped table-hover mb-0 align-middle">
            <thead class="text-white">
              <tr>
                <th>Materia</th>
                <th>Calificación Final</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let materia of grado.materias; let i = index"
                [class.row-alternate]="i % 2 === 1"
              >
                <td>{{ materia.nombreMateria }}</td>
                <td>{{ materia.promedio | number : '1.2-2' }}</td>
              </tr>

              <!-- FILA DEL PROMEDIO FINAL -->
              <tr class="table-warning fw-bold">
                <td class="text-end">Promedio Final:</td>
                <td>{{ grado.promedioFinalGrado | number : '1.2-2' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== MENSAJE SI NO HAY DATOS ===== -->
  <ng-template #sinDatos>
    <div class="alert alert-warning text-center mt-4">
      No se encontraron calificaciones registradas para este alumno.
    </div>
  </ng-template>

  <app-loading></app-loading>
</div>
